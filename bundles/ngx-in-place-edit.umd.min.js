!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-in-place-edit",["exports","@angular/core","rxjs","rxjs/operators","@angular/common"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ngx-in-place-edit"]={},e.ng.core,e.rxjs,e.rxjs.operators,e.ng.common)}(this,(function(e,t,n,r,i){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}Object.create;function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return c}Object.create;var a=function(e){this.tpl=e};a.decorators=[{type:t.Directive,args:[{selector:"[view]"}]}],a.ctorParameters=function(){return[{type:t.TemplateRef}]};var p=function(e){this.tpl=e};p.decorators=[{type:t.Directive,args:[{selector:"[edit]"}]}],p.ctorParameters=function(){return[{type:t.TemplateRef}]};var u={openOn:"click",closeOn:"click"},l=new t.InjectionToken("editable.config",{factory:function(){return u}}),d=function(){function e(e,r){this.el=e,this.config=r,this.openOn=this.config.openOn,this.closeOn=this.config.closeOn,this.save=new t.EventEmitter,this.cancel=new t.EventEmitter,this.onStateChange=new t.EventEmitter,this.editMode=new n.BehaviorSubject(!1),this.editMode$=this.editMode.asObservable(),this.destroy$=new n.Subject,this.isGrouped=!1}return Object.defineProperty(e.prototype,"element",{get:function(){return this.el.nativeElement},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.handleViewMode(),this.handleEditMode()},e.prototype.ngOnDestroy=function(){this.destroy$.next(!0)},e.prototype.handleViewMode=function(){var e=this;this.viewHandler=n.fromEvent(this.element,this.openOn).pipe(r.withLatestFrom(this.editMode$),r.filter((function(e){var t=s(e,2);t[0];return!t[1]})),r.takeUntil(this.destroy$)).subscribe((function(){return e.displayEditMode()}))},e.prototype.handleEditMode=function(){var e=this;this.editHandler=this.editMode$.pipe(r.switchMap((function(t){return function(t){return n.fromEvent(document,e.closeOn).pipe(r.filter((function(){return t})),r.skip(e.openOn===e.closeOn?1:0),r.filter((function(t){var n=t.target;return!1===e.element.contains(n)})),r.take(1))}(t)})),r.takeUntil(this.destroy$)).subscribe((function(){return e.saveEdit()}))},e.prototype.displayEditMode=function(){this.editMode.next(!0),this.onStateChange.emit("edit")},e.prototype.saveEdit=function(){this.save.next(),this.leaveEditMode()},e.prototype.cancelEdit=function(){this.cancel.next(),this.leaveEditMode()},e.prototype.leaveEditMode=function(){var e=this;this.editMode.next(!1),this.onStateChange.emit("view"),this.isGrouped||(this.viewHandler.unsubscribe(),setTimeout((function(){return e.handleViewMode()}),0))},e}();d.decorators=[{type:t.Component,args:[{selector:"ngx-inline-edit",template:'\n    <ng-container *ngTemplateOutlet="(editMode$ | async) ? editModeTpl.tpl : viewModeTpl.tpl"></ng-container>\n  ',changeDetection:t.ChangeDetectionStrategy.OnPush,styles:[":host {cursor: pointer;}"]}]}],d.ctorParameters=function(){return[{type:t.ElementRef},{type:void 0,decorators:[{type:t.Inject,args:[l]}]}]},d.propDecorators={openOn:[{type:t.Input}],closeOn:[{type:t.Input}],save:[{type:t.Output}],cancel:[{type:t.Output}],onStateChange:[{type:t.Output}],viewModeTpl:[{type:t.ContentChild,args:[a]}],editModeTpl:[{type:t.ContentChild,args:[p]}]};var h=function(){function e(e,t){this.editable=e,this.el=t,this.saveEvent="click",this.destroy$=new n.Subject}return e.prototype.ngOnInit=function(){var e=this;n.fromEvent(this.el.nativeElement,this.saveEvent).pipe(r.takeUntil(this.destroy$)).subscribe((function(){return e.editable.saveEdit()}))},e.prototype.ngOnDestroy=function(){this.destroy$.next(!0)},e}();h.decorators=[{type:t.Directive,args:[{selector:"[editableOnSave]"}]}],h.ctorParameters=function(){return[{type:d},{type:t.ElementRef}]},h.propDecorators={saveEvent:[{type:t.Input}]};var f=function(){function e(e,t){this.editable=e,this.el=t,this.cancelEvent="click",this.destroy$=new n.Subject}return e.prototype.ngOnInit=function(){var e=this;n.fromEvent(this.el.nativeElement,this.cancelEvent).pipe(r.takeUntil(this.destroy$)).subscribe((function(){return e.editable.cancelEdit()}))},e.prototype.ngOnDestroy=function(){this.destroy$.next(!0)},e}();f.decorators=[{type:t.Directive,args:[{selector:"[editableOnCancel]"}]}],f.ctorParameters=function(){return[{type:d},{type:t.ElementRef}]},f.propDecorators={cancelEvent:[{type:t.Input}]};var y=function(){function e(e){this.el=e}return e.prototype.ngOnInit=function(){this.el.nativeElement.focus()},e}();y.decorators=[{type:t.Directive,args:[{selector:"[editableFocusable]"}]}],y.ctorParameters=function(){return[{type:t.ElementRef}]};var v=function(){function e(e){this.editable=e}return e.prototype.onEnter=function(){this.editable.saveEdit()},e}();v.decorators=[{type:t.Directive,args:[{selector:"[editableOnEnter]"}]}],v.ctorParameters=function(){return[{type:d}]},v.propDecorators={onEnter:[{type:t.HostListener,args:["keyup.enter"]}]};var g=function(){function e(e){this.editable=e}return e.prototype.onEnter=function(){this.editable.cancelEdit()},e}();g.decorators=[{type:t.Directive,args:[{selector:"[editableOnEscape]"}]}],g.ctorParameters=function(){return[{type:d}]},g.propDecorators={onEnter:[{type:t.HostListener,args:["keyup.escape"]}]};var E=function(){function e(){this.save=new t.EventEmitter,this.cancel=new t.EventEmitter,this.editableModeChange=new t.EventEmitter}return e.prototype.ngAfterViewInit=function(){this.children.forEach((function(e){return e.isGrouped=!0})),this.children.forEach((function(e){return e.viewHandler.unsubscribe()})),this.children.forEach((function(e){return e.editHandler.unsubscribe()}))},e.prototype.displayEditMode=function(){this.editableModeChange.emit("edit"),this.children.forEach((function(e){return e.displayEditMode()}))},e.prototype.saveEdit=function(){this.editableModeChange.emit("view"),this.children.forEach((function(e){return e.saveEdit()})),this.save.emit()},e.prototype.cancelEdit=function(){this.editableModeChange.emit("view"),this.children.forEach((function(e){return e.cancelEdit()})),this.cancel.emit()},e}();E.decorators=[{type:t.Directive,args:[{selector:"[editableGroup]"}]}],E.propDecorators={children:[{type:t.ContentChildren,args:[d,{descendants:!0}]}],save:[{type:t.Output}],cancel:[{type:t.Output}],editableModeChange:[{type:t.Output}]};var m=function(e){this.group=e};m.decorators=[{type:t.Directive,args:[{selector:"[]"}]}],m.ctorParameters=function(){return[{type:E}]};var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.onClick=function(){this.group.cancelEdit()},t}(m);b.decorators=[{type:t.Directive,args:[{selector:"[editableGroupCancel]"}]}],b.propDecorators={onClick:[{type:t.HostListener,args:["click"]}]};var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.onClick=function(){this.group.saveEdit()},t}(m);O.decorators=[{type:t.Directive,args:[{selector:"[editableGroupSave]"}]}],O.propDecorators={onClick:[{type:t.HostListener,args:["click"]}]};var M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.onClick=function(){this.group.displayEditMode()},t}(m);M.decorators=[{type:t.Directive,args:[{selector:"[editableGroupEdit]"}]}],M.propDecorators={onClick:[{type:t.HostListener,args:["click"]}]};var w=function(){};w.decorators=[{type:t.NgModule,args:[{declarations:[d,a,p,h,f,y,v,g,E,b,O,M,m],imports:[i.CommonModule],exports:[d,a,p,h,f,y,v,g,E,M,O,b]}]}],e.DEFAULT_CONFIG=u,e.EDITABLE_CONFIG=l,e.InlineEditModule=w,e.ɵa=d,e.ɵb=a,e.ɵc=p,e.ɵd=h,e.ɵe=f,e.ɵf=y,e.ɵg=v,e.ɵh=g,e.ɵi=E,e.ɵj=b,e.ɵk=m,e.ɵl=O,e.ɵm=M,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-in-place-edit.umd.min.js.map